(function(){var Shopper,goldenCookieIntervalId,normalCookieIntervalId;Shopper=window.Shopper=window.Shopper||{};if(Shopper.stopAutoClicker){Shopper.stopAutoClicker()}goldenCookieIntervalId=normalCookieIntervalId=null;Shopper.startAutoClicker=function(clicksPerSecond){if(clicksPerSecond==null){clicksPerSecond=5}Shopper.stopAutoClicker();normalCookieIntervalId=setInterval(Game.ClickCookie,1e3/clicksPerSecond);return goldenCookieIntervalId=setInterval(function(){if(Game.goldenCookie.life>0){return Game.goldenCookie.click()}},1e3)};Shopper.stopAutoClicker=function(){clearInterval(normalCookieIntervalId);return clearInterval(goldenCookieIntervalId)}}).call(this);(function(){var Shopper;Shopper=window.Shopper=window.Shopper||{};Shopper.getCps=function(){if(Game.recalculateGains){Game.CalculateGains()}return Game.cookiesPs};Shopper.cpsGainUnsafe=function(item){var initialCps;initialCps=Shopper.getCps();Game.Earn(item.price||item.basePrice);item.buy();return Shopper.getCps()-initialCps};Shopper.cpsGain=function(item){return Shopper.safeCall(function(){return Shopper.cpsGainUnsafe(item)})};Shopper.cpsGainPerSecond=function(item){return Shopper.cpsGain(item)*Shopper.getCps()/(item.price||item.basePrice)}}).call(this);(function(){var Shopper,noop,savedFns;noop=function(){return void 0};savedFns={drawFunction:[],special:[],specialDrawFunction:[],clickFunction:null,popup:noop,l:noop};Shopper=window.Shopper=window.Shopper||{};Shopper.optimizeLoad=function(){var id,obj,oneMindUpgrade,_i,_len,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6;_ref=Game.ObjectsById;for(obj=_i=0,_len=_ref.length;_i<_len;obj=++_i){id=_ref[obj];_ref1=[noop,obj.drawFunction],obj.drawFunction=_ref1[0],savedFns.drawFunction[id]=_ref1[1];_ref2=[null,obj.special],obj.special=_ref2[0],savedFns.special[id]=_ref2[1];_ref3=[null,obj.specialDrawFunction],obj.specialDrawFunction=_ref3[0],savedFns.specialDrawFunction[id]=_ref3[1]}_ref4=[noop,Game.Popup],Game.Popup=_ref4[0],savedFns.popup=_ref4[1];_ref5=[function(){return{style:{},getBoundingClientRect:function(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}},window.l],window.l=_ref5[0],savedFns.l=_ref5[1];oneMindUpgrade=Game.UpgradesById[69];return _ref6=[null,oneMindUpgrade.clickFunction],oneMindUpgrade.clickFunction=_ref6[0],savedFns.clickFunction=_ref6[1],_ref6};Shopper.unoptimizeLoad=function(){var id,obj,oneMindUpgrade,_i,_len,_ref;_ref=Game.ObjectsById;for(obj=_i=0,_len=_ref.length;_i<_len;obj=++_i){id=_ref[obj];obj.drawFunction=savedFns.drawFunction[id];obj.special=savedFns.special[id];obj.specialDrawFunction=savedFns.specialDrawFunction[id]}Game.Popup=savedFns.popup;window.l=savedFns.l;oneMindUpgrade=Game.UpgradesById[69];return oneMindUpgrade.clickFunction=savedFns.clickFunction};Shopper.safeCall=function(fn){var gc,initialState,ret,shallowCopy,unrestored,_ref;shallowCopy=function(dst,src){var k,v,_results;_results=[];for(k in src){v=src[k];_results.push(dst[k]=v)}return _results};initialState=Game.WriteSave(1);unrestored=JSON.stringify([Game.frenzy,Game.frenzyPower,Game.clickFrenzy,Game.goldenCookie]);ret=fn();Game.LoadSave(initialState);_ref=JSON.parse(unrestored),Game.frenzy=_ref[0],Game.frenzyPower=_ref[1],Game.clickFrenzy=_ref[2],gc=_ref[3];shallowCopy(Game.goldenCookie,gc);return ret}}).call(this);(function(){var Shopper,checkStrategyTimeoutId,scheduleBuyTimeoutId;scheduleBuyTimeoutId=null;checkStrategyTimeoutId=null;Shopper=window.Shopper=window.Shopper||{};if(Shopper.stopAutobuyer){Shopper.stopAutobuyer()}Shopper.scheduleBuy=function(item,bank,callback){var savedFn,_ref;if(Game.cookies>=(item.price||item.basePrice)+bank){_ref=[null,item.clickFunction],item.clickFunction=_ref[0],savedFn=_ref[1];item.buy();item.clickFunction=savedFn;return callback()}else{return scheduleBuyTimeoutId=setTimeout(function(){return Shopper.scheduleBuy(item,bank,callback)},1e3*Math.min(1,Shopper.secondsTillPurchase(item)))}};Shopper.startAutobuyer=function(bank){var b,item,noBuffCps;if(bank==null){bank=0}Shopper.stopAutobuyer();noBuffCps=Shopper.getCps()/(Game.frenzy>0?Game.frenzyPower:1);if(bank===-1){b=noBuffCps*12e3}else if(bank===-2){b=noBuffCps*12e3*7}else{b=bank}item=Shopper.strategy();Shopper.scheduleBuy(item,b,function(){return Shopper.startAutobuyer(bank)});return checkStrategyTimeoutId=setTimeout(function(){return Shopper.startAutobuyer(bank)},1e4)};Shopper.stopAutobuyer=function(){clearTimeout(scheduleBuyTimeoutId);return clearTimeout(checkStrategyTimeoutId)}}).call(this);(function(){var Shopper,zip,__slice=[].slice;Shopper=window.Shopper=window.Shopper||{};Shopper.strategy=function(){var cpsGainsPs,items,sortedItems,zipped;Shopper.optimizeLoad();if(Game.storeToRebuild){Game.RebuildStore()}items=Game.UpgradesInStore.concat(Game.ObjectsById);cpsGainsPs=items.map(Shopper.cpsGainPerSecond);zipped=zip(items,cpsGainsPs);sortedItems=[].concat(zipped).sort(function(a,b){var timeSaved;if(a[1]===b[1]){return-(a[0].price||a[0].basePrice)+(b[0].price||b[0].basePrice)}else if(a[1]>b[1]){timeSaved=Shopper.secondsSavedByPurchase(b[0],a[0]);if(timeSaved===0){return a[1]-b[1]}return-timeSaved}else{timeSaved=Shopper.secondsSavedByPurchase(a[0],b[0]);if(timeSaved===0){return a[1]-b[1]}return timeSaved}}).map(function(x){return x[0]});Shopper.unoptimizeLoad();return sortedItems[items.length-1]};zip=function(){var args,shortest;args=1<=arguments.length?__slice.call(arguments,0):[];shortest=args.length===0?[]:args.reduce(function(a,b){if(a.length<b.length){return a}else{return b}});return shortest.map(function(_,i){return args.map(function(array){return array[i]})})}}).call(this);(function(){var Shopper;Shopper=window.Shopper=window.Shopper||{};Shopper.secondsTillPurchase=function(item){return((item.price||item.basePrice)-Game.cookies)/Shopper.getCps()};Shopper.skipToAfterPurchase=function(item){Game.Earn((item.price||item.basePrice)-Game.cookies);return item.buy()};Shopper.secondsSavedByPurchase=function(item,targetItem){return Shopper.safeCall(function(){var newSecondsTillTarget,oldSecondsTillTarget,secondsTillItem;secondsTillItem=Shopper.secondsTillPurchase(item);oldSecondsTillTarget=Shopper.secondsTillPurchase(targetItem);Shopper.skipToAfterPurchase(item);newSecondsTillTarget=Shopper.secondsTillPurchase(targetItem);return oldSecondsTillTarget-(newSecondsTillTarget+secondsTillItem)})}}).call(this);
