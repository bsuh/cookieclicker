(function(){var Shopper,goldenCookieIntervalId,normalCookieIntervalId;Shopper=window.Shopper=window.Shopper||{};goldenCookieIntervalId=normalCookieIntervalId=null;Shopper.startAutoClicker=function(){normalCookieIntervalId=setInterval(Game.ClickCookie,1e3/200);return goldenCookieIntervalId=setInterval(function(){if(Game.goldenCookie.life>0){return Game.goldenCookie.click()}},1e3)};Shopper.stopAutoClicker=function(){clearInterval(normalCookieIntervalId);return clearInterval(goldenCookieIntervalId)}}).call(this);(function(){var Shopper;Shopper=window.Shopper=window.Shopper||{};Shopper.getCps=function(){if(Game.recalculateGains){Game.CalculateGains()}return Game.cookiesPs};Shopper.cpsGainUnsafe=function(item){var initialCps;initialCps=Shopper.getCps();Game.Earn(item.price||item.basePrice);item.buy();return Shopper.getCps()-initialCps};Shopper.cpsGain=function(item){return Shopper.safeCall(function(){return Shopper.cpsGainUnsafe(item)})};Shopper.cpsGainPerSecond=function(item){return Shopper.cpsGain(item)*Shopper.getCps()/(item.price||item.basePrice)}}).call(this);(function(){var Shopper,noop,savedFns;noop=function(){return void 0};savedFns={drawFunction:[],special:[],specialDrawFunction:[],popup:noop};Shopper=window.Shopper=window.Shopper||{};Shopper.optimizeLoad=function(){var id,obj,_i,_len,_ref,_ref1,_ref2,_ref3,_ref4;_ref=Game.ObjectsById;for(obj=_i=0,_len=_ref.length;_i<_len;obj=++_i){id=_ref[obj];_ref1=[noop,obj.drawFunction],obj.drawFunction=_ref1[0],savedFns.drawFunction[id]=_ref1[1];_ref2=[null,obj.special],obj.special=_ref2[0],savedFns.special[id]=_ref2[1];_ref3=[null,obj.specialDrawFunction],obj.specialDrawFunction=_ref3[0],savedFns.specialDrawFunction[id]=_ref3[1]}return _ref4=[noop,Game.Popup],Game.Popup=_ref4[0],savedFns.popup=_ref4[1],_ref4};Shopper.unoptimizeLoad=function(){var id,obj,_i,_len,_ref;_ref=Game.ObjectsById;for(obj=_i=0,_len=_ref.length;_i<_len;obj=++_i){id=_ref[obj];obj.drawFunction=savedFns.drawFunction[id];obj.special=savedFns.special[id];obj.specialDrawFunction=savedFns.specialDrawFunction[id]}return Game.Popup=savedFns.popup};Shopper.safeCall=function(fn){var initialState,ret;initialState=Game.WriteSave(1);ret=fn();Game.LoadSave(initialState);return ret}}).call(this);(function(){var Shopper,timeoutId;timeoutId=null;Shopper=window.Shopper=window.Shopper||{};Shopper.scheduleBuy=function(item,callback){if(Game.cookies>=(item.price||item.basePrice)){item.buy();return setTimeout(callback,100)}else{return timeoutId=setTimeout(function(){return Shopper.scheduleBuy(item,callback)},1e3*Math.min(1,Shopper.secondsTillPurchase(item)))}};Shopper.startAutobuyer=function(){var item;item=Shopper.strategy();window.console.log("Will buy "+item.name+" next");return Shopper.scheduleBuy(item,Shopper.startAutobuyer)};Shopper.stopAutobuyer=function(){return clearTimeout(timeoutId)}}).call(this);(function(){var Shopper,zip,__slice=[].slice;Shopper=window.Shopper=window.Shopper||{};Shopper.strategy=function(){var cpsGainsPs,items,sortedItems,zipped;Shopper.optimizeLoad();items=Game.UpgradesInStore.concat(Game.ObjectsById);cpsGainsPs=items.map(Shopper.cpsGainPerSecond);zipped=zip(items,cpsGainsPs);sortedItems=[].concat(zipped).sort(function(a,b){if(a[1]===b[1]){return-(a[0].price||a[0].basePrice)+(b[0].price||b[0].basePrice)}else if(a[1]>b[1]){return-Shopper.secondsSavedByPurchase(b[0],a[0])}else{return Shopper.secondsSavedByPurchase(a[0],b[0])}}).map(function(x){return x[0]});Shopper.unoptimizeLoad();window.console.log(sortedItems.map(function(x){return x.name}));return sortedItems[items.length-1]};zip=function(){var args,shortest;args=1<=arguments.length?__slice.call(arguments,0):[];shortest=args.length===0?[]:args.reduce(function(a,b){if(a.length<b.length){return a}else{return b}});return shortest.map(function(_,i){return args.map(function(array){return array[i]})})}}).call(this);(function(){var Shopper;Shopper=window.Shopper=window.Shopper||{};Shopper.secondsTillPurchase=function(item){return((item.price||item.basePrice)-Game.cookies)/Shopper.getCps()};Shopper.skipToAfterPurchase=function(item){Game.Earn((item.price||item.basePrice)-Game.cookies);return item.buy()};Shopper.secondsSavedByPurchase=function(item,targetItem){return Shopper.safeCall(function(){var newSecondsTillTarget,oldSecondsTillTarget,secondsTillItem;secondsTillItem=Shopper.secondsTillPurchase(item);oldSecondsTillTarget=Shopper.secondsTillPurchase(targetItem);Shopper.skipToAfterPurchase(item);newSecondsTillTarget=Shopper.secondsTillPurchase(targetItem);return oldSecondsTillTarget-(newSecondsTillTarget+secondsTillItem)})}}).call(this);
